<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <title>Using jsCoq with NPM (a template)</title>

    <!-- important: this will not work from *within* the jsCoq package dir; -->
    <!-- this template is meant to be copied to your project dir and edited -->
    <script src="node_modules/jscoq/ui-js/jscoq-loader.js"></script>
  </head>

<body class="jscoq-main">
  <div id="ide-wrapper" class="toggled">
    <div id="code-wrapper">
      <div id="document">

<h1>Chapter 7.4 | The ordinal subtype</h1><div><textarea id='coq-code'>
From mathcomp Require Import all_ssreflect.
Set Implicit Arguments.
Unset Strict Implicit.
Unset Printing Implicit Defensive.

Module Ordinal74.
  Inductive ordinal (n : nat) : Type := Ordinal m of m < n.
  Notation "''I_' n" := (ordinal n).

  Coercion nat_of_ord n (i : ordinal n) := let: Ordinal m _ := i in m.
  Canonical ordinal_subType n := [subType for (@nat_of_ord n)].
  Definition ordinal_eqMixin n := Eval hnf in [eqMixin of (@ordinal n) by <:].
  Canonical ordinal_eqType n :=
    Eval hnf in EqType (ordinal n) (ordinal_eqMixin n).

  Definition ord_enum n : seq (ordinal n) := pmap insub (iota 0 n).
End Ordinal74.

Lemma val_ord_enum n : map val (ord_enum n) = iota 0 n.
Proof.
  rewrite pmap_filter; last by exact: insubK.
    by apply/all_filterP; apply/allP => i; rewrite mem_iota isSome_insub.
Qed.

Lemma ord_enum_uniq n : uniq (ord_enum n).
Proof. by rewrite pmap_sub_uniq ?iota_uniq. Qed.

Lemma mem_ord_enum n i : i \in (ord_enum n).
Proof.
    by rewrite -(mem_map (@ord_inj n)) (val_ord_enum n) mem_iota ltn_ord.
Qed.

Definition ordinal_finMixin n :=
  Eval hnf in UniqFinMixin (ord_enum_uniq n) (@mem_ord_enum n).

Canonical ordinal_finType n :=
  Eval hnf in FinType (ordinal n) (ordinal_finMixin n).

Lemma tnth_default T n (t : n.-tuple T) : 'I_n -> T.
Proof. by rewrite -(size_tuple t); case (tval t) => [|//] []. Qed.

Definition tnth T n (t : n.-tuple T) (i : 'I_n) : T :=
  nth (tnth_default t i) t i.

Definition enum_rank (T : finType) : T -> 'I_#|T|.



</textarea></div>
<script type='text/javascript'>
var coqdoc_ids = ['coq'];
</script>
        </textarea>
      </div>
    </div>
  </div>

  <!-- jsCoq configuration part -->
  <script type="text/javascript">

    var jscoq_ids  = ['coq-code'];
    var jscoq_opts = {
        prelude:   true,
        base_path: './node_modules/jscoq/',
        editor:    { mode: { 'company-coq': true }, keyMap: 'default' },
        init_pkgs: ['init'],
        all_pkgs:  ['coq', 'mathcomp']
    };

    JsCoq.start(jscoq_opts.base_path, './node_modules', jscoq_ids, jscoq_opts);
  </script>
</body>
